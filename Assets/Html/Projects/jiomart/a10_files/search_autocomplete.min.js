var app_id=window.algolia_app_id,api_key=window.algolia_api_key,index_name=window.algolia_suffix+"_query_suggestions",master_code=window.default_vertical_city_code;localStorage.getItem("jio_vertical_city_code")&&(master_code=JSON.parse(localStorage.getItem("jio_vertical_city_code")));var image_base=window.product_image_path,client=algoliasearch(app_id,api_key),index=client.initIndex(index_name),region_filter="",cat_filter="",available_filter="";for(var vertical in master_code){var cat_name=vertical.toLowerCase();if(cat_name=cat_name.charAt(0).toUpperCase()+cat_name.slice(1),master_code[vertical]){var code=master_code[vertical];available_filter+="available_stores:"+code+" OR "}else cat_filter+="NOT category_level.level1:"+cat_name+" AND "}""!=cat_filter&&(region_filter+="("+(cat_filter=cat_filter.slice(0,-5))+")"),""!=cat_filter&&""!=available_filter&&(region_filter+=" AND "),""!=available_filter&&(region_filter+="("+(available_filter=available_filter.slice(0,-4))+")");var src=["web",localStorage.getItem("nms_mgo_pincode")],master_code=window.default_vertical_city_code;for(var vertical in localStorage.getItem("jio_vertical_city_code")&&(master_code=JSON.parse(localStorage.getItem("jio_vertical_city_code"))),master_code)null!=master_code[vertical]&&src.push(master_code[vertical]);var hitsSource=autocomplete.sources.hits(index,{hitsPerPage:10,clickAnalytics:!0,filters:region_filter,analyticsTags:src});function pickMostPopularCategory(hit){const categories=Object.values(hit).filter(maybeIndex=>maybeIndex.facets&&maybeIndex.facets.exact_matches&&maybeIndex.facets.exact_matches["category_level.level1"]&&maybeIndex.facets.exact_matches["category_level.level1"].length>0).map(index=>index.facets.exact_matches["category_level.level1"][0]);let bestCategory=null,bestCount=0;for(let category of categories)category.count>bestCount&&(bestCategory=category.value,bestCount=category.count);return bestCategory}$(document).ready((function(){autocomplete("#search",{hint:!1,debug:!1},[{source:function(query,callback){hitsSource(query,(function(suggestions,params){for(i=0;i<suggestions.length;i++)suggestions[i].index=i+1;var promoted=params.userData;if(promoted)for(i=0;i<promoted.length;i++){var index=promoted[i].position;index>0&&(index-=1),promoted[i].promoted=!0,suggestions.splice(index,0,promoted[i])}callback(suggestions,params)}))},templates:{suggestion:function(suggestion,params){var sugg_count=suggestion.index,queryId=params.queryID,query=encodeURIComponent(suggestion.query),classname="",vertical=pickMostPopularCategory(suggestion);if(null!=vertical)var index_name=window.algolia_suffix+"_"+vertical.toLowerCase();else{vertical="";var index_name=window.algolia_suffix+"_master_vertical"}if(1!=sugg_count)var index_name=window.algolia_suffix+"_master_vertical";var href="/catalogsearch/result?q="+query+"&in="+index_name;1==sugg_count&&""!=vertical&&(classname="first search-"+vertical.toLowerCase());var sugg_html=`<div class="product-item-info auto-suggestion ${classname}" data-queryid="${queryId}"><a href="${href}">`,value;return sugg_html+=1==sugg_count&&""!=vertical?'<div class="drug_img"></div>':'<div class="auto_search_icon"></div>',sugg_html+=`<div class="search-text">${'<span class="highlighted">'+suggestion._highlightResult.query.value+"</span>"}`,1==sugg_count&&""!=vertical&&(sugg_html+=`<span> in ${vertical}</span>`),sugg_html+="</div></a></div>"},footer:function(params){}},dropdownMenuContainer:"#algolia-autocomplete-container"}]).on("autocomplete:selected",(function(event,suggestion){event.preventDefault()})).on("autocomplete:updated",(function(event){}))}));