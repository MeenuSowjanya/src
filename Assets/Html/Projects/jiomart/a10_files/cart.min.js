function update_variant_price(sku){var product=window.variants_extra_json[sku],mrp=product.mrp.toFixed(2),selling_price=product.selling_price.toFixed(2),save=(product.mrp-product.selling_price).toFixed(2),discount_pct=product.discount_pct;discount_pct>0?($("#alg_price").html(`\n            <span class="final-price"><span>&#8377;  ${selling_price}</span></span>\n            <span class="price">M.R.P: <strike>&#8377;  ${mrp}</strike></span>\n            <div class="clearfix"></div>\n            <span class="disc-price">You Save: <span>&#8377;  ${save}</span></span>\n            <span class="tax_text">Inclusive of all taxes</span>                    \n        `),$(".dis_section").length>0?$(".dis_section span").text(discount_pct):$(".gallery-top .swiper-wrapper").after(`<div class="dis_section"> <span>${discount_pct}</span>%<div class="clearfix"></div>OFF </div>`)):$("#alg_price").html(`\n            <span class="final-price">M.R.P: <span>&#8377; ${selling_price}</span></span>\n            <span class="tax_text">Inclusive of all taxes</span>                    \n        `)}$(document).ready((function(){$("#locked_offer_terms").length>0&&$("#locked_offer_terms").prop("checked",!1),applyPlusMinusButton()})),$(document).on("click","#variant_size button",(function(ev){var size_reload;if(!$(this).hasClass("disabled"))if(1==$("#size_reload").val()){$("#variant_size button").removeClass("selected"),$(this).addClass("selected");var size=$(this).text();$("#select_size").text("Size : "+size).removeClass("alert_size");var sku=$(this).attr("data-prodcode");if($("#product_id").val(sku),wishlistButton(),window.variants_extra_json[sku]){var alt_sku=window.variants_extra_json[sku].alternate_product_code;$("#alt_sku").val(alt_sku),update_variant_price(sku)}var btn_html=`<button type="button" title="ADD TO CART" class="toCart addtocartbtn prodbtn" data-sku="${sku}">\n                <span class="txt_btn">Add to Cart</span>\n                <span class="add_plus"></span>\n            </button>`;$(".cart_btn").html(btn_html),applyPlusMinusButton()}else{var prod_url=$(this).attr("data-url");window.location.href=prod_url}})),$(document).on("click",".addtocartbtn",(function(ev){ev.preventDefault();var category="",sub_category="",brand="",sectionTitle=$(this).closest("section").attr("data-tracker");null!=sectionTitle&&null!=sectionTitle&&""!=sectionTitle&&(window.nms_tracker=sectionTitle,localStorage.removeItem("nms_product_tracker"));var product_section=$(this).closest("section").attr("data-tracker");if(null!=product_section&&null!=product_section&&""!=product_section){var itemDiv=null;$(this).closest(".swiper-slide").length>0&&(itemDiv=$(this).closest(".swiper-slide")),null!=itemDiv&&null!=itemDiv&&(category=null!=itemDiv.find(".data-cate").val()?itemDiv.find(".data-cate").val():"",sub_category=null!=itemDiv.find(".data-subcate").val()?itemDiv.find(".data-subcate").val():"",brand=null!=itemDiv.find(".data-manu").val()?itemDiv.find(".data-manu").val():"")}if($("body").hasClass("otc-product-page")){var trackTitle=$(this).closest(".product-add-form").attr("data-tracker");null!=trackTitle&&null!=trackTitle&&""!=trackTitle&&(window.nms_tracker=trackTitle,localStorage.removeItem("nms_product_tracker")),$(this).hasClass("prodbtn")&&(category=null!=$("#data-cate").val()?$("#data-cate").val():"",sub_category=null!=$("#data-subcate").val()?$("#data-subcate").val():"",brand=null!=$("#data-manu").val()?$("#data-manu").val():"")}if(($("body").hasClass("otc-manu-page")||$("body").hasClass("otc-category-page")||$("body").hasClass("otc-brand-page")||$("body").hasClass("search-result-page"))&&($("#topdeal_page").length>0&&$(".data-tracker").length>0&&(window.nms_tracker=$(".data-tracker").text()),category=null!=$(this).closest(".cat-item").find(".data-cate").val()?$(this).closest(".cat-item").find(".data-cate").val():"",sub_category=null!=$(this).closest(".cat-item").find(".data-subcate").val()?$(this).closest(".cat-item").find(".data-subcate").val():"",brand=null!=$(this).closest(".cat-item").find(".data-manu").val()?$(this).closest(".cat-item").find(".data-manu").val():""),$("body").hasClass("search-result-page")&&(window.nms_tracker="Search Results"),$("body").hasClass("top-deals-list")&&$("#topdeal_page").length>0&&$(".data-tracker").length>0&&(window.nms_tracker=$(".data-tracker").text(),category=null!=$(this).closest(".cat-item").find(".data-cate").val()?$(this).closest(".cat-item").find(".data-cate").val():"",sub_category=null!=$(this).closest(".cat-item").find(".data-subcate").val()?$(this).closest(".cat-item").find(".data-subcate").val():"",brand=null!=$(this).closest(".cat-item").find(".data-manu").val()?$(this).closest(".cat-item").find(".data-manu").val():""),localStorage.getItem("authtokenexpire")){var today=new Date,expiry=localStorage.getItem("authtokenexpire"),expiry_date=new Date(expiry);today.getTime()>expiry_date.getTime()&&("jiomartapp"==$.cookie("nms_refer_lite")?app_sendToApp({type:"refreshJMAuthenticationToken"}):generateUserToken(!0))}if(($("body").hasClass("prod-fashion")||$("body").hasClass("prod-beauty"))&&$("#variant_size").length>0){var selected=!1;if($("#variant_size button").each((function(i,el){$(el).hasClass("selected")&&(selected=!0)})),0==selected){var header_height=$(".top-section").height()+150,scroll_pos=$("#variant_size").offset().top-header_height;return $("html, body").animate({scrollTop:scroll_pos},1e3,"swing",(function(){$("#variant_size .select-size").removeClass("alert_size").addClass("alert_size")})),!1}}$(this).attr("disabled",!0);var qty=1,sku=$(this).attr("data-sku"),universal_cart=!0,status;if(handle_add_to_cart(1,sku,!0)){var add_on_status=$("#add_on_status").val();if($("body").hasClass("prod-electronics")&&1==add_on_status&&$("#elec_addon_dialog").length>0&&($("#elec_addon_dialog").modal("show"),$("#elec_addon_dialog").attr("data-source","addtocart"),window.free_service.length>0)){var free_prods=window.free_service;$(free_prods).each((function(i,val){var main_sku,status=perform_add_to_cart(1,val,0,$("#main_product_id").val())})),get_cart_details(!0)}applyPlusMinusButton();var queryId="";$(this).attr("data-queryid")&&(queryId=$(this).attr("data-queryid")),cart_success_tracking(sku,queryId,category,sub_category,brand)}else $(this).attr("disabled",!1)}));var count=0;function handle_add_to_cart(qty,sku,universal_cart){if(++count>=4)return notify("Error occurred. Try again later","danger"),count=0,!1;if(null==localStorage.getItem("authtoken")){if(generateUserToken(universal_cart))return handle_add_to_cart(qty,sku,universal_cart)}else{var cart_id=0;if(0==universal_cart&&localStorage.getItem("paynowID"))var cart_id=localStorage.getItem("paynowID");var cart_resp=perform_add_to_cart(qty,sku,cart_id,0);if(!0===cart_resp)return count=0,1==universal_cart&&(get_cart_details(universal_cart),processMiniCart()),!0;if("UNAUTHORIZED"==cart_resp.reason_code)return localStorage.removeItem("userid"),localStorage.removeItem("authtoken"),handle_add_to_cart(qty,sku,universal_cart);if("CART_NOT_FOUND"==cart_resp.reason_code){if(create_universal_cart())return handle_add_to_cart(qty,sku,universal_cart)}else{if("OPERATION_PROHIBITED_WHILE_CHECKINGOUT"!=cart_resp.reason_code)return"INSUFFICIENT_INVENTORY"==cart_resp.reason_code?(notify("This product currently is out of stock at your pincode","danger"),!1):cart_resp.reason_eng?(notify(cart_resp.reason_eng,"danger"),!1):(notify("Error occurred. Try again later","danger"),!1);if(continue_shopping())return handle_add_to_cart(qty,sku,universal_cart)}}}function perform_add_to_cart(qty,sku,cart_id,depends_on){var d,n=(new Date).getTime(),userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),pincode=localStorage.getItem("nms_mgo_pincode"),api_url=$("#mstar_api_baseurl").val(),cart_status=!1,ajax_data={product_code:sku,qty:qty,n:n};return 0!=cart_id&&(ajax_data.cart_id=cart_id),0!=depends_on&&(ajax_data.depends_on=depends_on),$.ajax({url:api_url+"cart/add_item",data:ajax_data,headers:{userid:userid,authtoken:authtoken,pin:pincode},async:!1,method:"GET",dataType:"JSON",success:function(resp){"success"==resp.status&&(cart_status=!0)},error:function(xhr,status,error){if(xhr.responseJSON){var resp=xhr.responseJSON;cart_status=resp.reason}else notify("Error occurred. Try again later","danger")}}),cart_status}function generateUserToken(universal_cart){var d,n=(new Date).getTime(),api_url=$("#mstar_api_baseurl").val(),status=!1;return $.ajax({url:api_url+"session/create/guest?channel=msite",data:{n:n},async:!1,method:"GET",success:function(resp){if("success"==resp.status)if(resp.result.session){let result=resp.result.session;localStorage.setItem("authtoken",result.id),localStorage.setItem("userid",0),localStorage.setItem("authtokenexpire",result.valid_till),status=!0,create_universal_cart(universal_cart)}else notify("Error occurred. Try again later","danger");else notify("Error occurred. Try again later","danger")},error:function(){notify("Error occurred. Try again later","danger")}}),status}function create_universal_cart(universal_cart){var d,n=(new Date).getTime(),userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),api_url=$("#mstar_api_baseurl").val(),cart_status=!1;return $.ajax({url:api_url+"cart/create",data:{universal:universal_cart,n:n},headers:{userid:userid,authtoken:authtoken},async:!1,method:"GET",dataType:"JSON",success:function(resp){if("success"==resp.status&&(cart_status=!0,0==universal_cart)){var cart_id=resp.result.cart_id;localStorage.setItem("paynowID",cart_id)}},error:function(xhr,status,error){cart_status=!1,notify("Error occurred. Try again later","danger")}}),cart_status}function continue_shopping(){var d,n=(new Date).getTime(),userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),api_url=$("#mstar_api_baseurl").val(),cart_status=!1;return $.ajax({url:api_url+"cart/continue_shopping",data:{n:n},headers:{userid:userid,authtoken:authtoken},async:!1,method:"GET",dataType:"JSON",success:function(resp){"success"==resp.status&&(cart_status=!0)},error:function(xhr,status,error){cart_status=!1,notify("Error occurred. Try again later","danger")}}),cart_status}function get_cart_details(universal_cart){var d,n=(new Date).getTime(),userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),pincode=localStorage.getItem("nms_mgo_pincode"),api_url=$("#mstar_api_baseurl").val(),cart_details=!1,cart_data={n:n};if(0==universal_cart){var cart_id=localStorage.getItem("paynowID");cart_data.cart_id=cart_id}return $.ajax({url:api_url+"cart/get",data:cart_data,headers:{userid:userid,authtoken:authtoken,pin:pincode},async:!1,method:"GET",dataType:"JSON",success:function(resp){if("success"==resp.status&&(cart_details=!0,resp.result.cart)){var result=resp.result;if(1==universal_cart){var cart_count=0;result.hasOwnProperty("cart")&&result.cart.hasOwnProperty("lines")&&(cart_count=result.cart.lines.length),localStorage.setItem("nms_cart_count",cart_count);var cart_info=JSON.stringify(result);localStorage.setItem("cart_info",cart_info),cart_count>0?$(".mini-cart .counter-number").text(cart_count).show():$(".mini-cart .counter-number").text(cart_count).hide()}else{var cart_info=JSON.stringify(result);localStorage.setItem("buy_now_cart_info",cart_info)}}},error:function(xhr,status,error){cart_details=!1,notify("Error occurred. Try again later","danger")}}),cart_details}function cart_success_tracking(sku,queryId,category,sub_category,brand){if("ga"in window&&(tracker=ga.getAll()[0],tracker&&tracker.send("event","New Click actions","Addtocart","Add to Cart Button")),""==queryId){var algolia_data=localStorage.getItem("nms_alg_queryId");if(algolia_data){var alg_data=algolia_data.split(":"),product_sku,queryId;if(2==alg_data.length)if(sku==alg_data[0])trackAlgoliaInsight(sku,queryId=alg_data[1])}}else trackClickAlgoliaInsight(sku,queryId),trackAlgoliaInsight(sku,queryId);var gtmStatus;if("1"==document.getElementById("gtm_status").value&&localStorage.getItem("cart_info")){var cart_products=JSON.parse(localStorage.getItem("cart_info"));if(dataLayer&&cart_products.cart.lines)for(var products=cart_products.cart.lines,i=0;i<products.length;i++)if(products[i].product_code==sku){var prod=products[i],customer={};0!=localStorage.getItem("userid")&&null!=localStorage.getItem("userid")?(customer.isLoggedIn=!0,customer.id=localStorage.getItem("userid"),localStorage.getItem("displayemail")&&(customer.email=$.md5(localStorage.getItem("displayemail"))),localStorage.getItem("new_customer")&&(customer.new_customer=localStorage.getItem("new_customer")),customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase())):(customer.isLoggedIn=!1,customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase()));var zipCode="NA";localStorage.getItem("nms_mgo_pincode")&&(zipCode=localStorage.getItem("nms_mgo_pincode"));var main_category="";prod.vertical_code&&(main_category+=ucfirst(prod.vertical_code,!0)),category&&(main_category+="/"+category),sub_category&&(main_category+="/"+sub_category),dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_addToCart",ecommerce:{add:{actionField:{list:window.nms_tracker},products:[{name:prod.display_name,id:prod.product_code,price:prod.selling_price,brand:brand,category:main_category,quantity:prod.qty}]}},customer:customer})}}}function trackClickAlgoliaInsight(product_sku,queryId){if(queryId&&""!=queryId){var user_id=localStorage.getItem("userid");0!=user_id&&null!=user_id||(user_id=$.cookie("_ALGOLIA")?$.cookie("_ALGOLIA"):"0");var pos_elem=".cart_btn",current=$("button[data-sku='"+product_sku+"']").closest(pos_elem),position=$(pos_elem).index(current);position=parseInt(position)+1;var index_name=window.algolia_suffix+"_master_vertical";localStorage.getItem("nms_alg_indexname")&&(index_name=localStorage.getItem("nms_alg_indexname"));var src=["web",localStorage.getItem("nms_mgo_pincode")],master_code=window.default_vertical_city_code;for(var vertical in localStorage.getItem("jio_vertical_city_code")&&(master_code=JSON.parse(localStorage.getItem("jio_vertical_city_code"))),master_code)null!=master_code[vertical]&&src.push(master_code[vertical]);aa("clickedObjectIDsAfterSearch",{userToken:user_id,eventName:"Added to Cart",index:index_name,queryID:queryId,objectIDs:[product_sku],positions:[position],analyticsTags:src})}}function trackAlgoliaInsight(product_sku,queryId){if(queryId&&""!=queryId){var user_id=localStorage.getItem("userid");0!=user_id&&null!=user_id||(user_id=$.cookie("_ALGOLIA")?$.cookie("_ALGOLIA"):"0");var index_name=window.algolia_suffix+"_master_vertical";localStorage.getItem("nms_alg_indexname")&&(index_name=localStorage.getItem("nms_alg_indexname"));var src=["web",localStorage.getItem("nms_mgo_pincode")],master_code=window.default_vertical_city_code;for(var vertical in localStorage.getItem("jio_vertical_city_code")&&(master_code=JSON.parse(localStorage.getItem("jio_vertical_city_code"))),master_code)null!=master_code[vertical]&&src.push(master_code[vertical]);aa("convertedObjectIDsAfterSearch",{userToken:user_id,eventName:"Added to Cart",index:index_name,queryID:queryId,objectIDs:[product_sku],analyticsTags:src})}}function applyPlusMinusButton(){var cart_info=JSON.parse(localStorage.getItem("cart_info"));if(cart_info){var cart_prods=cart_info.cart.lines;$(cart_prods).each((function(i,prod){if(prod.qty>0){var sku=prod.product_code,element=$(".addtocartbtn[data-sku='"+sku+"']");if(element.length>0){var qty=prod.qty,max_qty=prod.max_qty_in_order,stock_qty=prod.stock_qty,max_allowed=max_qty;stock_qty<max_qty&&(max_allowed=stock_qty),$(element).each((function(i,elem){var prodpage=!1;$(elem).hasClass("prodbtn")&&(prodpage=!0);var vertical=$("#vertical_code").val();1==prodpage&&"ELECTRONICS"==vertical?1==qty&&max_allowed>1&&prod.promotions&&"FREE_ITEM_LEVEL"==prod.promotions[0].ui_hint?$(elem).attr("disabled",!1):$(elem).replaceWith('<a class="gotocart" href="/checkout/cart">Go to Cart</a>'):1==qty&&max_allowed>1&&prod.promotions&&"FREE_ITEM_LEVEL"==prod.promotions[0].ui_hint?$(elem).attr("disabled",!1):(prod.promotions&&"FREE_ITEM_LEVEL"==prod.promotions[0].ui_hint&&(qty-=1,max_allowed+=1),$(elem).replaceWith(`\n                                    <button type="button" data-sku="${sku}" class="qtybtn qty_add qty_minus ${prodpage?"prodminus":""}">-</button>\n                                    <span class="qty_count">${qty}</span>\n                                    <button type="button" data-sku="${sku}" ${max_allowed==qty?"disabled":""} data-max="${max_allowed}" class="qtybtn qty_add qty_plus">+</button>\n                                `))}))}}}))}}function processMiniCart(){var rs_symbol="&#8377;",cart_info=localStorage.getItem("cart_info");if(cart_info=JSON.parse(cart_info)){var cart_data=cart_info.cart;if(cart_data.lines&&cart_data.lines.length>0){var cart_items,last_updated=cart_data.lines,total_items=last_updated.length,remaining_items=total_items-2,mc_html='<a href="/checkout/cart"><div class="mc_title"><h2>Order Summary</h2><span class="items">'+total_items+" item(s)</span></div>";for(i=0;i<=1;i++)if(last_updated[i]){var latest_product=last_updated[i],prod_name=latest_product.display_name,qty=latest_product.qty,selling_price=parseFloat(latest_product.selling_price).toFixed(2),price_qty="&#8377;".replace(/&amp;/g,"&")+" "+selling_price+"x"+qty;latest_product.qty>0&&0==latest_product.selling_price&&(price_qty="FREE"),!latest_product.promotions||"FREE_ITEM_LEVEL"!=latest_product.promotions[0].ui_hint&&"FREE_VERTICAL_LEVEL"!=latest_product.promotions[0].ui_hint&&"FREE_CART_LEVEL"!=latest_product.promotions[0].ui_hint||(price_qty="FREE"),mc_html+='<div class="mc_item"><div class="item_name">'+prod_name+'</div><div class="item_details">'+price_qty+"</div></div>"}var sub_total=parseFloat(cart_data.sub_total).toFixed(2),savings=parseFloat(cart_data.total_savings).toFixed(2),total_amount=parseFloat(sub_total-savings).toFixed(2);remaining_items>0&&(mc_html+='<div class="mc_remaining">+'+remaining_items+" more items</div>"),mc_html+='<div class="mc_footer"><div class="mc_price"><div class="mc_amount">'+"&#8377;".replace(/&amp;/g,"&")+" "+total_amount+"</div>",savings>0&&(mc_html+='<div class="mc_savings">You save '+"&#8377;".replace(/&amp;/g,"&")+" "+savings+"</div>"),mc_html+='</div><button class="mc_cartBtn btn-ripple" type="button">PROCEED TO CART</button></div></a>',$(".mc_content").html(mc_html),$(".minicart_container").show(),setTimeout((function(){$(".minicart_container").hide()}),3e3)}}}function buynowItem(add_on_status,jioOffer,mainObj){var qty=1,sku=mainObj.attr("data-sku");if(null==localStorage.getItem("userid")||"0"==localStorage.getItem("userid")){var all_sku=[];all_sku.push(sku),window.free_service&&$(window.free_service).each((function(i,val){all_sku.push(val)}));var all_prod_sku=all_sku.join(",");localStorage.setItem("buynowdata",all_prod_sku),1==add_on_status&&$("#elec_addon_dialog").length>0?(mainObj.attr("disabled",!1),$("#elec_addon_dialog").modal("show"),$("#elec_addon_dialog").attr("data-source","buynow")):window.location.href="/customer/account/login"}else{if("true"!=jioOffer){var cart_info=localStorage.getItem("cart_info"),exists_in_univ_cart=!1,universal_cart,status;if(cart_info){var cart_products=JSON.parse(cart_info);if(cart_products.cart.lines){var cart_prods=cart_products.cart.lines;if(cart_prods.length>0)for(var i=0;i<cart_prods.length;i++)cart_prods[i].product_code==sku&&(exists_in_univ_cart=!0)}}if(0==exists_in_univ_cart)if((status=handle_add_to_cart(1,sku,universal_cart=!0))&&window.free_service.length>0){var free_prods=window.free_service;$(free_prods).each((function(i,val){var main_sku,status=perform_add_to_cart(1,val,0,$("#main_product_id").val())})),get_cart_details(!0)}}var exists_in_buynow_cart=!1;localStorage.removeItem("paynowID"),localStorage.removeItem("buy_now_cart_info");var universal_cart=!1,status,lock_options;if(localStorage.getItem("paynowID"))var cart_status=!0;else var cart_status=create_universal_cart(universal_cart);if(cart_status)if(status=handle_add_to_cart(1,sku,universal_cart))if(1==add_on_status&&$("#elec_addon_dialog").length>0){if(mainObj.attr("disabled",!1),$("#elec_addon_dialog").modal("show"),$("#elec_addon_dialog").attr("data-source","buynow"),window.free_service.length>0){var free_prods=window.free_service;$(free_prods).each((function(i,val){var cart_id,main_sku,status=perform_add_to_cart(1,val,localStorage.getItem("paynowID"),$("#main_product_id").val())})),get_cart_details(!1)}}else{if("true"==jioOffer){var buySuccess=!1,lock_options;if(null!=localStorage.getItem("lock_options"))if((lock_options=JSON.parse(localStorage.getItem("lock_options")))&&Object.keys(lock_options).length>0)if(null!=localStorage.getItem("paynowID")&&""!=localStorage.getItem("paynowID"))var buySuccess=lockedProduct(localStorage.getItem("lock_options"),localStorage.getItem("paynowID"));else var buySuccess=lockedProduct(localStorage.getItem("lock_options"),!1);1==buySuccess&&get_cart_details(!1)}else get_cart_details(!1);window.location.href="/checkout/review"}else mainObj.attr("disabled",!1)}}function remove_cart_items(sku,qty){var userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),pincode=localStorage.getItem("nms_mgo_pincode"),api_url=$("#mstar_api_baseurl").val(),d,n,cart_data={product_code:sku,qty:qty,n:(new Date).getTime()};localStorage.getItem("paynowID")&&(cart_data.cart_id=localStorage.getItem("paynowID"));var cart_resp=!1;return $.ajax({url:api_url+"cart/remove_item",data:cart_data,headers:{userid:userid,authtoken:authtoken,pin:pincode},async:!1,method:"GET",dataType:"JSON",success:function(resp){"success"==resp.status&&(cart_resp=!0)},error:function(xhr,status,error){xhr.responseJSON&&(cart_resp=!1)}}),cart_resp}function lockedProduct(offer_obj,cartID){var api_url=$("#mstar_api_baseurl").val();if(0!=cartID)var cartUrl=api_url+"cart/set_poj?cart_id="+cartID;else var cartUrl=api_url+"cart/set_poj";var userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),ObjString={},resultant=!1;if(null!=userid&&"0"!=userid&&null!=authtoken&&""!=authtoken){if(offer_obj){var lock_options=JSON.parse(offer_obj);if(1==lock_options.locked_phone)if($("#product_custype").val(null),$("#locked_phone").val("true"),null!=lock_options.customer_type){if($(".jio-offer-details .offer-applied-btn").show(),$(".jio-offer-details .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),"new"==lock_options.customer_type)var customerTypes="new";else if("existing"==lock_options.customer_type)var customerTypes="existing";else if("mnp"==lock_options.customer_type)var customerTypes="mnp";else var customerTypes=null;var itemCode=$(".buynowbtn").attr("data-sku").toString();""!=lock_options.product_code&&(itemCode=lock_options.product_code.toString()),ObjString=""!=lock_options.mnp_source_number?""!=lock_options.product_code?'{"locked_phone_info":{ "'+itemCode+'": {"locked_phone":'+!0+',"customer_type":"'+customerTypes+'","mnp_source_number":"'+lock_options.mnp_source_number+'"}}}':'{"locked_phone":true,"customer_type":"'+customerTypes+'","mnp_source_number":"'+lock_options.mnp_source_number+'"}':""!=lock_options.product_code?'{"locked_phone_info":{ "'+itemCode+'": {"locked_phone":'+!0+',"customer_type":"'+customerTypes+'","mnp_source_number":""}}}':'{"locked_phone":true,"customer_type":"'+customerTypes+'","mnp_source_number":""}'}else ObjString=""!=lock_options.product_code?'{"locked_phone_info":{ "'+itemCode+'": {"locked_phone":'+!0+',"customer_type":"","mnp_source_number":""}}}':'{"locked_phone":true,"customer_type":"","mnp_source_number":""}'}$.ajax({url:cartUrl,data:ObjString,dataType:"JSON",type:"POST",headers:{userid:userid,authtoken:authtoken,"Content-Type":"application/json"},async:!1,success:function(responce){"success"==responce.status&&(localStorage.removeItem("lock_options"),console.log(responce.status),resultant=!0)},error:function(error){console.log(JSON.stringify(error))}})}return resultant}function ucfirst(str,force){return(str=force?str.toLowerCase():str).replace(/(\b)([a-zA-Z])/,(function(firstLetter){return firstLetter.toUpperCase()}))}$(document).on("click",".qty_minus",(function(){var minus_btn=$(this);minus_btn.prop("disabled",!0);var sku=minus_btn.attr("data-sku"),current_qty=parseInt(minus_btn.next().text()),qty=1,userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),pincode=localStorage.getItem("nms_mgo_pincode"),api_url=$("#mstar_api_baseurl").val(),d,n=(new Date).getTime(),category="",sub_category="",brand="",product_section=$(this).closest("section").attr("data-tracker");if(null!=product_section&&null!=product_section&&""!=product_section){var itemDiv=null;$(this).closest(".swiper-slide").length>0&&(itemDiv=$(this).closest(".swiper-slide")),null!=itemDiv&&null!=itemDiv&&(category=null!=itemDiv.find(".data-cate").val()?itemDiv.find(".data-cate").val():"",sub_category=null!=itemDiv.find(".data-subcate").val()?itemDiv.find(".data-subcate").val():"",brand=null!=itemDiv.find(".data-manu").val()?itemDiv.find(".data-manu").val():"")}$("body").hasClass("otc-product-page")&&$(this).closest(".product-add-form").length>0&&(category=null!=$(this).closest(".product-add-form").find("#data-cate").val()?$(this).closest(".product-add-form").find("#data-cate").val():"",sub_category=null!=$(this).closest(".product-add-form").find("#data-subcate").val()?$(this).closest(".product-add-form").find("#data-subcate").val():"",brand=null!=$(this).closest(".product-add-form").find("#data-manu").val()?$(this).closest(".product-add-form").find("#data-manu").val():""),($("body").hasClass("otc-manu-page")||$("body").hasClass("otc-category-page")||$("body").hasClass("otc-brand-page")||$("body").hasClass("search-result-page"))&&(category=null!=$(this).closest(".cat-item").find(".data-cate").val()?$(this).closest(".cat-item").find(".data-cate").val():"",sub_category=null!=$(this).closest(".cat-item").find(".data-subcate").val()?$(this).closest(".cat-item").find(".data-subcate").val():"",brand=null!=$(this).closest(".cat-item").find(".data-manu").val()?$(this).closest(".cat-item").find(".data-manu").val():""),$("body").hasClass("top-deals-list")&&$("#topdeal_page").length>0&&$(".data-tracker").length>0&&(category=null!=$(this).closest(".cat-item").find(".data-cate").val()?$(this).closest(".cat-item").find(".data-cate").val():"",sub_category=null!=$(this).closest(".cat-item").find(".data-subcate").val()?$(this).closest(".cat-item").find(".data-subcate").val():"",brand=null!=$(this).closest(".cat-item").find(".data-manu").val()?$(this).closest(".cat-item").find(".data-manu").val():""),$.ajax({url:api_url+"cart/remove_item",data:{product_code:sku,qty:1,n:n},headers:{userid:userid,authtoken:authtoken,pin:pincode},async:!1,method:"GET",dataType:"JSON",success:function(resp){if("success"==resp.status){if(current_qty-1==0){var btn_html=`<button type="button" title="ADD TO CART" class="toCart addtocartbtn" data-sku="${sku}">\n                            <span class="txt_btn">Add to Cart</span>\n                            <span class="add_plus"></span>\n                        </button>`;minus_btn.parent().html(btn_html)}else minus_btn.prop("disabled",!1),minus_btn.next().next().prop("disabled",!1),minus_btn.next().text(current_qty-1);var gtmStatus;if("1"==document.getElementById("gtm_status").value&&localStorage.getItem("cart_info")){var cart_products=JSON.parse(localStorage.getItem("cart_info"));if(dataLayer&&cart_products.cart.lines)for(var products=cart_products.cart.lines,i=0;i<products.length;i++)if(products[i].product_code==sku){var prod=products[i],customer={};0!=localStorage.getItem("userid")&&null!=localStorage.getItem("userid")?(customer.isLoggedIn=!0,customer.id=localStorage.getItem("userid"),localStorage.getItem("displayemail")&&(customer.email=$.md5(localStorage.getItem("displayemail"))),localStorage.getItem("new_customer")&&(customer.new_customer=localStorage.getItem("new_customer")),customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase())):(customer.isLoggedIn=!1,customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase()));var zipCode="NA";localStorage.getItem("nms_mgo_pincode")&&(zipCode=localStorage.getItem("nms_mgo_pincode"));var main_category="";prod.vertical_code&&(main_category+=ucfirst(prod.vertical_code,!0)),category&&(main_category+="/"+category),sub_category&&(main_category+="/"+sub_category),dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_removeFromCart",ecommerce:{remove:{products:[{name:prod.display_name,id:prod.product_code,price:prod.selling_price,brand:brand,category:main_category,quantity:1}]}},customer:customer})}}get_cart_details(!0)}},error:function(xhr,status,error){if(xhr.responseJSON)var resp=xhr.responseJSON;else notify("Error occurred. Try again later","danger")}})})),$(document).on("click",".qty_plus",(function(){var plus_btn=$(this);plus_btn.prop("disabled",!0);var sku=plus_btn.attr("data-sku"),current_qty=parseInt(plus_btn.prev().text()),qty=1,category="",sub_category="",brand="";if($("body").hasClass("otc-product-page")){var sectionTitle=$(this).closest("section").attr("data-tracker");null!=sectionTitle&&null!=sectionTitle&&""!=sectionTitle&&(window.nms_tracker=sectionTitle,localStorage.removeItem("nms_product_tracker"))}var product_section=$(this).closest("section").attr("data-tracker");if(null!=product_section&&null!=product_section&&""!=product_section){var itemDiv=null;$(this).closest(".swiper-slide").length>0&&(itemDiv=$(this).closest(".swiper-slide")),null!=itemDiv&&null!=itemDiv&&(category=null!=itemDiv.find(".data-cate").val()?itemDiv.find(".data-cate").val():"",sub_category=null!=itemDiv.find(".data-subcate").val()?itemDiv.find(".data-subcate").val():"",brand=null!=itemDiv.find(".data-manu").val()?itemDiv.find(".data-manu").val():"")}if($("body").hasClass("otc-product-page")&&$(this).closest(".product-add-form").length>0){var trackTitle=$(this).closest(".product-add-form").attr("data-tracker");null!=trackTitle&&null!=trackTitle&&""!=trackTitle&&(window.nms_tracker=trackTitle,localStorage.removeItem("nms_product_tracker")),category=null!=$(this).closest(".product-add-form").find("#data-cate").val()?$(this).closest(".product-add-form").find("#data-cate").val():"",sub_category=null!=$(this).closest(".product-add-form").find("#data-subcate").val()?$(this).closest(".product-add-form").find("#data-subcate").val():"",brand=null!=$(this).closest(".product-add-form").find("#data-manu").val()?$(this).closest(".product-add-form").find("#data-manu").val():""}($("body").hasClass("otc-manu-page")||$("body").hasClass("otc-category-page")||$("body").hasClass("otc-brand-page")||$("body").hasClass("search-result-page"))&&($("#topdeal_page").length>0&&$(".data-tracker").length>0&&(window.nms_tracker=$(".data-tracker").text()),category=null!=$(this).closest(".cat-item").find(".data-cate").val()?$(this).closest(".cat-item").find(".data-cate").val():"",sub_category=null!=$(this).closest(".cat-item").find(".data-subcate").val()?$(this).closest(".cat-item").find(".data-subcate").val():"",brand=null!=$(this).closest(".cat-item").find(".data-manu").val()?$(this).closest(".cat-item").find(".data-manu").val():""),$("body").hasClass("search-result-page")&&(window.nms_tracker="Search Results"),$("body").hasClass("top-deals-list")&&$("#topdeal_page").length>0&&$(".data-tracker").length>0&&(window.nms_tracker=$(".data-tracker").text(),category=null!=$(this).closest(".cat-item").find(".data-cate").val()?$(this).closest(".cat-item").find(".data-cate").val():"",sub_category=null!=$(this).closest(".cat-item").find(".data-subcate").val()?$(this).closest(".cat-item").find(".data-subcate").val():"",brand=null!=$(this).closest(".cat-item").find(".data-manu").val()?$(this).closest(".cat-item").find(".data-manu").val():"");var status=perform_add_to_cart(1,sku,0,0);if(!0===status){var max_allowed,gtmStatus;if(plus_btn.prev().text(current_qty+1),current_qty+1==plus_btn.attr("data-max")||plus_btn.prop("disabled",!1),get_cart_details(!0),"1"==document.getElementById("gtm_status").value&&localStorage.getItem("cart_info")){var cart_products=JSON.parse(localStorage.getItem("cart_info"));if(dataLayer&&cart_products.cart.lines)for(var products=cart_products.cart.lines,i=0;i<products.length;i++)if(products[i].product_code==sku){var prod=products[i],customer={};0!=localStorage.getItem("userid")&&null!=localStorage.getItem("userid")?(customer.isLoggedIn=!0,customer.id=localStorage.getItem("userid"),localStorage.getItem("displayemail")&&(customer.email=$.md5(localStorage.getItem("displayemail"))),localStorage.getItem("new_customer")&&(customer.new_customer=localStorage.getItem("new_customer")),customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase())):(customer.isLoggedIn=!1,customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase()));var zipCode="NA";localStorage.getItem("nms_mgo_pincode")&&(zipCode=localStorage.getItem("nms_mgo_pincode"));var main_category="";prod.vertical_code&&(main_category+=ucfirst(prod.vertical_code,!0)),category&&(main_category+="/"+category),sub_category&&(main_category+="/"+sub_category),dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_addToCart",ecommerce:{add:{actionField:{list:window.nms_tracker},products:[{name:prod.display_name,id:prod.product_code,price:prod.selling_price,brand:brand,category:main_category,quantity:1}]}},customer:customer})}}}else{if("INSUFFICIENT_INVENTORY"==status.reason_code)return notify("This product currently is out of stock at your pincode","danger"),!1;status.reason_eng?notify(status.reason_eng,"danger"):notify("Error occurred. Try again later","danger")}})),$("#minicart_btn,.minicart_container").hover((function(){processMiniCart()}),(function(){$(".minicart_container").hide()})),$(document).on("click",".lockedprodbtn",(function(ev){ev.preventDefault(),$("#jiocashback_dialog").modal("show"),$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset(),$(".new_jio").is(":checked")&&$(".jiocashback-submit").attr("disabled",!0)})),$(document).on("click",".buynowbtn",(function(ev){ev.preventDefault(),$(this).attr("disabled",!0);var add_on_status=$("#add_on_status").val(),jioOffer="false",sku=$(this).attr("data-sku"),lockedProd="";if(null!=(lockedProd=$(this).attr("data-jiolocked"))&&""!=lockedProd&&"true"==lockedProd&&null!=localStorage.getItem("lock_options")){var lock_options=JSON.parse(localStorage.getItem("lock_options"));null!=lock_options.locked_phone&&1==lock_options.locked_phone&&null!=lock_options.customer_type&&null!=lock_options.product_code&&""!=lock_options.product_code&&null!=sku&&""!=sku&&lock_options.product_code==sku.toString()&&(add_on_status=0,jioOffer="true"),localStorage.removeItem("paynowID"),localStorage.removeItem("buy_now_cart_info")}buynowItem(add_on_status,jioOffer,$(this))})),$("#extended_services_form").submit((function(ev){ev.preventDefault();var ext_sku=[],extended_warr;if((extended_warr=$(".ext_warranty_sku:checked").val())&&ext_sku.push(extended_warr),$(".add_on_sku:checked").each((function(){var sku=$(this).val();ext_sku.push(sku)})),ext_sku.length>0){var source=$("#elec_addon_dialog").attr("data-source");if(localStorage.getItem("buynowdata")){var main_sku=localStorage.getItem("buynowdata");ext_sku.unshift(main_sku);var all_sku=ext_sku.join(",");localStorage.setItem("buynowdata",all_sku),window.location.href="/customer/account/login"}else{var main_sku=$("#main_product_id").val(),all_status_arr=[],all_status;if("buynow"==source){var extended_warr=$(".ext_warranty_sku:checked").val(),cart_id=localStorage.getItem("paynowID");if(extended_warr){var status=perform_add_to_cart(1,extended_warr,cart_id,main_sku);all_status_arr.push(status)}$(".add_on_sku:checked").each((function(){var val,status=perform_add_to_cart(1,$(this).val(),cart_id,main_sku);all_status_arr.push(status)}))}else $(ext_sku).each((function(i,val){var status=perform_add_to_cart(1,val,0,main_sku);all_status_arr.push(status)}));1==all_status_arr.every(status=>!0===status)?($("#elec_addon_dialog").modal("hide"),"addtocart"==source?(get_cart_details(!0),notify("Added to cart successfully","success")):(get_cart_details(!1),window.location.href="/checkout/review")):($("#elec_addon_dialog").modal("hide"),notify("Error Occurred! Try again later","error"))}}})),$(document).on("change",'input:radio[name="new_jio"]',(function(){if($(".jiocashback-submit").prop("disabled",!0),$("#port_number").val(""),$("#exist_number").val(""),$("#port_number").prop("readonly",!0),$("#exist_number").prop("readonly",!0),$(this).is(":checked")){var new_jio=$(this).val(),pNumber="";$("#product_custype").val(null),$("#mnp_source_number").val(null),""!=new_jio&&($("#product_custype").val(new_jio),$("#locked_phone").val("true"),"mnp"==new_jio?($("#port_number").prop("readonly",!1),""!=$("#port_number").val()&&(pNumber=$("#port_number").val())):"existing"==new_jio?($("#exist_number").prop("readonly",!1),""!=$("#exist_number").val()&&(pNumber=$("#exist_number").val())):pNumber=null,""!=pNumber&&null!=pNumber&&$("#mnp_source_number").val(pNumber),$(".jiocashback-submit").prop("disabled",!1))}})),$(document).ready((function(e){if($("body").hasClass("otc-product-page")){$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset();var lockedStatus=!1,lock_options=localStorage.getItem("lock_options");if(null!=lock_options){var lockedValues=JSON.parse(lock_options);if(0!=(lockedStatus=$(".buynowbtn").attr("data-jiolocked"))&&"true"==lockedStatus){var prodSku=null!=$(".buynowbtn").attr("data-sku")?$(".buynowbtn").attr("data-sku"):null;null!=lockedValues.product_code&&null!=prodSku&&lockedValues.product_code!=prodSku&&($(".jio-offer-details .jioOff").html(""),$(".jio-offer-details .offer-applied-btn").hide(),$(".hideCart").css({display:"flex"}),$(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show(),lockedValues="")}else lockedValues="",localStorage.removeItem("lock_options");null!=lockedValues&&""!=lockedValues?1==lockedValues.locked_phone&&($("#product_custype").val(null),$("#locked_phone").val("true"),null!=lockedValues.customer_type&&($(".hideCart").css({display:"none"}),$(".jio-offer-details .offer-applied-btn").show(),$(".offer-applied-btn .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),"mnp"==lockedValues.customer_type?($("#mnp_number").prop("checked",!0),$("#product_custype").val("mnp"),null!=lockedValues.mnp_source_number&&(""!=lockedValues.mnp_source_number&&null!=lockedValues.mnp_source_number?($("#port_number").val(lockedValues.mnp_source_number),$("#mnp_source_number").val(lockedValues.mnp_source_number),$(".textOffer").text(""),$(".textOffer_mpn").find(".textOffer").text(lockedValues.mnp_source_number),$(".offer-applied-btn .jioOff").html($(".textOffer_mpn").html()).show()):($("#mnp_source_number").val(null),$("#port_number").val("")))):"existing"==lockedValues.customer_type?($("#existing_jio").prop("checked",!0),$("#product_custype").val("existing"),null!=lockedValues.mnp_source_number&&(""!=lockedValues.mnp_source_number&&null!=lockedValues.mnp_source_number?($("#exist_number").val(lockedValues.mnp_source_number),$("#mnp_source_number").val(lockedValues.mnp_source_number),$(".textOffer").text(""),$(".textOffer_existing").find(".textOffer").text(lockedValues.mnp_source_number),$(".offer-applied-btn .jioOff").html($(".textOffer_existing").html()).show()):($("#mnp_source_number").val(null),$("#exist_number").val(""),$(".textOffer").text(""),$(".textOffer_existing").find(".textOffer").text(lockedValues.mnp_source_number),$(".offer-applied-btn .jioOff").html($(".textOffer_existing").html()).show()))):"new"==lockedValues.customer_type&&($("#new_jio").prop("checked",!0),$("#product_custype").val("new"),$(".offer-applied-btn .jioOff").html($(".textOffer_new").html()).show()))):($(".jio-offer-details .jioOff").html(""),$(".jio-offer-details .offer-applied-btn").hide(),$(".hideCart").css({display:"flex"}),$(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show())}else $(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show(),$(".hideCart").css({display:"flex"}),$(".jio-offer-details .offer-applied-btn").hide();$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset();var newJio="",jioOffer;"true"==(null!=$(".buynowbtn").attr("data-jiolocked")?$(".buynowbtn").attr("data-jiolocked"):"false")&&($(".jiocashback-submit").prop("disabled",!0),""!=(newJio=$('input:radio[name="new_jio"]:checked').val())&&$(".jiocashback-submit").prop("disabled",!1),$("#jiocashback_form").validate({ignoreTitle:!0,errorElement:"div",errorClass:"form_error",rules:{exist_number:{Validationmobile:$("#exist_number").val()},port_number:{required:"#mnp_number:checked",mobileValidation:$("#port_number").val()}},messages:{port_number:{required:"Please enter non-jio mobile number"}}}),$.validator.addMethod("mobileValidation",(function(value,element){return!(value.length>0)||!!/^\d{10}$/.test(value)}),"Please enter valid mobile number"),$.validator.addMethod("Validationmobile",(function(value,element){return!(value.length>0)||!!/^\d{10}$/.test(value)}),"Please enter valid mobile number"),$(".jiocashback-submit").click((function(ev){ev.preventDefault(),$("#jiocashback_form").submit()})),$("#jiocashback_form").submit((function(e){if(e.preventDefault(),$(".number_error").text(""),$(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show(),$(".jio-offer-details .offer-applied-btn").hide(),$(".offer-applied-btn .jioOff").html(""),$(this).valid()){$(".jiocashback-submit").attr("disabled",!0);var locked_status=null!=$("#locked_phone").val()?$("#locked_phone").val():"",customerType=null!=$("#product_custype").val()?$("#product_custype").val():"",newJio=$('input:radio[name="new_jio"]:checked').val(),pNumber="";""!=newJio&&("mnp"==newJio?""!=$("#port_number").val()&&(pNumber=$("#port_number").val(),$(".jio-offer-details .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),$(".jio-offer-details .offer-applied-btn").show(),$(".textOffer").text(""),$(".textOffer_mpn").find(".textOffer").text(pNumber),$(".offer-applied-btn .jioOff").html($(".textOffer_mpn").html()).show()):"existing"==newJio?""!=$("#exist_number").val()?(pNumber=$("#exist_number").val(),$(".jio-offer-details .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),$(".jio-offer-details .offer-applied-btn").show(),$(".textOffer").text(""),$(".textOffer_existing").find(".textOffer").text(pNumber),$(".offer-applied-btn .jioOff").html($(".textOffer_existing").html()).show()):($(".jio-offer-details .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),$(".jio-offer-details .offer-applied-btn").show(),$(".textOffer").text(""),$(".offer-applied-btn .jioOff").html($(".textOffer_existing").html()).show()):"new"==newJio?(pNumber=null,$(".jio-offer-details .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),$(".jio-offer-details .offer-applied-btn").show(),$(".textOffer").text(""),$(".offer-applied-btn .jioOff").html($(".textOffer_new").html()).show()):pNumber=null,""!=pNumber&&null!=pNumber&&$("#mnp_source_number").val(pNumber));var mpn_number=null!=$("#mnp_source_number").val()?$("#mnp_source_number").val():null,add_on_status=0,jioOffer="true";if(""!=customerType&&""!=locked_status){localStorage.removeItem("lock_options"),$(".jio-offer-details .offer-applied-btn").show(),$(".hideCart").css({display:"none"});var offer_obj={};offer_obj.locked_phone="true"==locked_status,offer_obj.customer_type=customerType,offer_obj.mnp_source_number=null!=mpn_number?mpn_number:null,$(".buynowbtn").length>0&&(offer_obj.product_code=$(".buynowbtn").attr("data-sku")),offer_obj&&Object.keys(offer_obj).length>0&&localStorage.setItem("lock_options",JSON.stringify(offer_obj)),$("#jiocashback_dialog .close").trigger("click")}}})))}})),$(document).on("keypress keyup change","#exist_number",(function(){$(".jiocashback-submit").prop("disabled",!1),0==$(this).val().indexOf("0")&&$(this).val($(this).val().substring(1))})),$(document).on("keyup","#exist_number",(function(){this.value=this.value.replace(/[^0-9\.]/g,"")})),$(document).on("keypress keyup change","#port_number",(function(){$(".jiocashback-submit").prop("disabled",!1),0==$(this).val().indexOf("0")&&$(this).val($(this).val().substring(1))})),$(document).on("keyup","#port_number",(function(){this.value=this.value.replace(/[^0-9\.]/g,"")})),$(document).on("show.bs.modal","#jiocashback_dialog",(function(){var newJio;$('input:radio[name="new_jio"]:checked').length>0?$(".jiocashback-submit").prop("disabled",!1):$(".jiocashback-submit").prop("disabled",!0),$("#exist_number-error").text(""),$("#port_number-error").text(""),$("#port_number").prop("readonly",!0),$("#exist_number").prop("readonly",!0);var prodbuySku=$(".buynowbtn").attr("data-sku"),lock_options=localStorage.getItem("lock_options"),lockedValues="";null!=lock_options?""!=(lockedValues=JSON.parse(lock_options))&&""!=prodbuySku&&""!=lockedValues.product_code&&(lockedValues.product_code!=prodbuySku?$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset():1==lockedValues.locked_phone&&($("#product_custype").val(null),$("#locked_phone").val("true"),null!=lockedValues.customer_type&&($(".jio-offer-details .offer-applied-btn").show(),$(".hideCart").css({display:"none"}),"mnp"==lockedValues.customer_type?($("#mnp_number").prop("checked",!0),$("#product_custype").val("mnp"),$("#port_number").prop("readonly",!1),null!=lockedValues.mnp_source_number&&(""!=lockedValues.mnp_source_number&&null!=lockedValues.mnp_source_number?($("#port_number").val(lockedValues.mnp_source_number),$("#mnp_source_number").val(lockedValues.mnp_source_number)):($("#mnp_source_number").val(null),$("#port_number").val("")))):"existing"==lockedValues.customer_type?($("#existing_jio").prop("checked",!0),$("#product_custype").val("existing"),$("#exist_number").prop("readonly",!1),null!=lockedValues.mnp_source_number&&(""!=lockedValues.mnp_source_number&&null!=lockedValues.mnp_source_number?($("#exist_number").val(lockedValues.mnp_source_number),$("#mnp_source_number").val(lockedValues.mnp_source_number)):($("#mnp_source_number").val(null),$("#exist_number").val("")))):"new"==lockedValues.customer_type&&($("#new_jio").prop("checked",!0),$("#product_custype").val("new"))))):($("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset(),$(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show(),$(".hideCart").css({display:"flex"}),$(".jio-offer-details .offer-applied-btn").hide())})),$(document).on("hidden.bs.modal","#jiocashback_dialog",(function(){$(".jiocashback-submit").prop("disabled",!0)})),$(document).on("click",".jiocashback-skip",(function(e){var add_on_status=0,jioOffer="true";$(this).attr("disabled",!1);var lock_options=localStorage.getItem("lock_options");null!=lock_options&&""!=lock_options||$("#jiocashback_form")[0].reset(),$("#jiocashback_dialog").modal("hide")})),$(document).on("click","#jiocashback_dialog .close",(function(e){$("#jiocashback_dialog").modal("hide"),$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset(),$(".jiocashback-submit").prop("disabled",!0)})),$(document).on("click",".jio-offer-remove",(function(e){var lock_options,lockedValues="";null!=localStorage.getItem("lock_options")&&localStorage.removeItem("lock_options"),$(".jio-offer-details .jioOff").html(""),$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset(),$(".jio-offer-details .offer-applied-btn").hide(),$(".hideCart").css({display:"flex"}),$(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show()})),$(document).on("change","#locked_offer_terms",(function(){var checked;$(this).is(":checked")?($(".lockedprodbtn").prop("disabled",!1),$(".lockedprodbtn").removeClass("disabled")):($(".lockedprodbtn").prop("disabled",!0),$(".lockedprodbtn").addClass("disabled"))}));