var page=2,fetchMore=!0,jio_ads_script=!1,jio_ads_load_script=!1;function update_gtm_data_details(){$(".gtm_data").each((function(index,el){var pos=index+1;$(el).attr("data-position",pos);var parent=$(el).parent(),width=parent.width(),height=parent.height();$(el).attr("data-width",width),$(el).attr("data-height",height)}))}function applySwiper(){var allSwipe=new Swiper(".winter-swipe, .drug_info_swipe, .popular-swipe",{slidesPerView:"auto",spaceBetween:0,freeMode:!0}),swiper=new Swiper(".trending_swiper",{slidesPerView:"auto",spaceBetween:0}),swiper=new Swiper(".new_arrival_swiper",{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".swiper-new_arrival-btn-next",prevEl:".swiper-new_arrival-btn-prev"}}),swiper=new Swiper(".shop-vertical-slides",{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".swiper-ver-btn-next",prevEl:".swiper-ver-btn-prev"}}),swiper=new Swiper(".category-swipe, .testimonial-swipe",{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});$(".new_product_swiper").each((function(i,element){$(this).addClass("home-prod-swipe-"+i),$(this).parent().find(".swiper-new_product_swiper-next").addClass("home-prod-right-"+i),$(this).parent().find(".swiper-new_product_swiper-prev").addClass("home-prod-left-"+i);var swiper=new Swiper(".home-prod-swipe-"+i,{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".home-prod-right-"+i,prevEl:".home-prod-left-"+i}})})),$(".all-category-swiper").each((function(i,element){$(this).addClass("all-cat-swipe-"+i),$(this).parent().find(".swiper-all-category-next").addClass("all-cat-right-"+i),$(this).parent().find(".swiper-all-category-prev").addClass("all-cat-left-"+i);var swiper=new Swiper(".all-cat-swipe-"+i,{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".all-cat-right-"+i,prevEl:".all-cat-left-"+i}})})),$(".shop_cat_swiper").each((function(i,element){$(this).addClass("home-cat-swipe-"+i),$(this).parent().find(".swiper-shop_cat_swiper-next").addClass("home-cat-right-"+i),$(this).parent().find(".swiper-shop_cat_swiper-prev").addClass("home-cat-left-"+i);var swiper=new Swiper(".home-cat-swipe-"+i,{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".home-cat-right-"+i,prevEl:".home-cat-left-"+i}})})),$(".main_category_swiper").each((function(i,element){var swiper=new Swiper(".main_category_swiper",{slidesPerView:3,spaceBetween:16,navigation:{nextEl:".main_category_swiper-next",prevEl:".main_category_swiper-prev"}})}));var swiper=new Swiper(".home-slides",{slidesPerView:"auto",spaceBetween:0,autoplay:{delay:5e3,disableOnInteraction:0},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-home-btn-next",prevEl:".swiper-home-btn-prev"}});$(".home-category-swipe").each((function(i,element){$(this).addClass("cat-swipe-"+i),$(this).parent().find(".swiper-category-next").addClass("cat-right-"+i),$(this).parent().find(".swiper-category-prev").addClass("cat-left-"+i);var swiper=new Swiper(".cat-swipe-"+i,{slidesPerView:6,spaceBetween:12,navigation:{nextEl:".cat-right-"+i,prevEl:".cat-left-"+i}})})),$(".home-best-seller-swipe").each((function(i,element){$(this).addClass("prod-swipe-"+i),$(this).parent().find(".swiper-best-seller-next").addClass("prod-right-"+i),$(this).parent().find(".swiper-best-seller-prev").addClass("prod-left-"+i);var swiper=new Swiper(".prod-swipe-"+i,{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".prod-right-"+i,prevEl:".prod-left-"+i}})}));var swiper=new Swiper(".home-trending-slides",{slidesPerView:3,spaceBetween:16,navigation:{nextEl:".swiper-trending-next",prevEl:".swiper-trending-prev"},autoplay:{delay:3e3,disableOnInteraction:0}}),swiper=new Swiper(".payment-slides",{slidesPerView:2,spaceBetween:16,navigation:{nextEl:".swiper-pay-button-next",prevEl:".swiper-pay-button-prev"},autoplay:{delay:3e3,disableOnInteraction:0}})}function get_top_deals_product_section(sec_ids){if($(".top_deals_product_section").length>0){var pincode=window.default_pin;localStorage.getItem("nms_mgo_pincode")&&(pincode=localStorage.getItem("nms_mgo_pincode")),$.ajax({url:"/cms/topdeals",method:"GET",headers:{pin:pincode},data:{section:sec_ids},dataType:"JSON",success:function(resp){if(resp.hasOwnProperty("html")&&Object.keys(resp.html).length>0)for(var key in resp.html)if(""!=resp.html[key]){var i=$(".new_product_swiper").length;$("#sec_"+key).html(resp.html[key]),$("#sec_"+key).find(".new_product_swiper").addClass("home-prod-swipe-"+i),$("#sec_"+key).find(".swiper-new_product_swiper-next").addClass("home-prod-right-"+i),$("#sec_"+key).find(".swiper-new_product_swiper-prev").addClass("home-prod-left-"+i);var swiper=new Swiper(".home-prod-swipe-"+i,{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".home-prod-right-"+i,prevEl:".home-prod-left-"+i}});applyPlusMinusButton()}},error:function(){}})}}function get_personalised_products(){if($(".personalised_top_products").length>0&&null!=localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")){var pincode,pers_pincode;localStorage.getItem("nms_mgo_pincode")!=localStorage.getItem("jio_personalised_products_pincode")&&localStorage.removeItem("jio_personalised_products_expiry");var personalised_expiry=localStorage.getItem("jio_personalised_products_expiry"),pers_today=new Date,pers_expiry_date=new Date(personalised_expiry);if(pers_today.getTime()>pers_expiry_date.getTime()){var userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken");$.ajax({url:$("#personalised_api_url").val(),type:"GET",data:{},dataType:"JSON",headers:{userid:userid,authtoken:authtoken},success:function(resp){var products_list;"success"==resp.status&&(resp.result.productList&&resp.result.productList.length>0&&get_product_list(resp.result.productList.join()))},error:function(){}})}else{var personalised_products=JSON.parse(localStorage.getItem("jio_personalised_products"));personalised_products&&bind_personalised_products_html(personalised_products)}}}function get_product_list(prod_list){var sku=prod_list,store_code=[],verticals=[],pin=localStorage.getItem("nms_mgo_pincode");if(localStorage.getItem("jio_vertical_city_code"))for(var vertical in master_code=JSON.parse(localStorage.getItem("jio_vertical_city_code")),master_code)verticals.push(vertical),master_code[vertical]&&store_code.push(master_code[vertical]);$.ajax({url:"/home/personalised",method:"GET",data:{},headers:{pin:pin,verticals:verticals,"store-code":store_code.join(),sku:sku},dataType:"JSON",success:function(resp){if("success"==resp.status&&resp.result.product_list.length>0){var products=resp.result.product_list;localStorage.setItem("jio_personalised_products",JSON.stringify(products));var pers_today=new Date;pers_today.setHours(pers_today.getHours()+2),localStorage.setItem("jio_personalised_products_expiry",pers_today),localStorage.setItem("jio_personalised_products_pincode",pin),bind_personalised_products_html(products)}},error:function(){}})}function bind_personalised_products_html(products){var html="";if(products.length>0){for(i=0;i<products.length;i++){var product=products[i];if("A"==product.availability_status){html+='<div class="swiper-slide">\n                    <div class="pro_items">',product.discount_pct&&product.discount_pct>0&&(html+=`<span class="dis_section"><span>${product.discount_pct}<span class="per_txt">%</span></span><br/>off</span>`);var food_class="",food_type="";product.json_ext&&product.json_ext.food_type?food_type=product.json_ext.food_type.toLowerCase():product.food_type&&(food_type=product.food_type.toLowerCase()),"green dot"==food_type&&(food_class="text-veg"),"red dot"==food_type&&(food_class="text-nonveg"),"black cross"==food_type&&(food_class="text-nonedible"),html+=`<span class="food_type_sec"><span class="${food_class}"></span></span>`;var image="",selling_price,mrp,save,selling_price;if(product.image_paths&&product.image_paths.length>0?image=window.product_image_path+"images/product/150x150/"+product.image_paths[0]:product.image_path&&(image=window.product_image_path+"images/product/150x150/"+product.image_path),html+=`<div class="pro_detail">\n                        <a href="${product.url_path}" data-objid="${product.product_code}" title="${product.display_name}">`,html+=`<input name="data-manu" type="hidden" value="${product.brand}" class="data-manu"/>\n                        <input name="data-vertical" type="hidden" value="${product.category_level.level1}" class="data-vertical"/>\n                        <input name="data-cate" type="hidden" value="${product.category_level.level2}" class="data-cate"/>\n                        <input name="data-subcate" type="hidden" value="${product.category_level.level3}" class="data-subcate"/>\n                        <span class="cat-img"> \n                            <img class="product-image-photo" src="${image}" alt="${product.display_name}">\n                        </span>\n                        <span class="clsgetname">${product.display_name}</span>\n                    </a>\n                </div>`,html+='<div class="price_box">',product.discount_pct&&product.discount_pct>0)html+=`<span class="final_price">&#8377; ${selling_price=product.selling_price.toFixed(2)}</span>`,html+=`<span class="price">M.R.P: <strike>&#8377; ${product.mrp.toFixed(2)}</strike></span>`,html+=`<span class="save_price">Save &#8377; ${(product.mrp-product.selling_price).toFixed(2)}</span>`;else html+=`M.R.P: <span class="final_price center">&#8377; ${selling_price=product.selling_price.toFixed(2)}</span>`;html+="</div>",html+=`<div class="cart_btn">\n                            <div class="cart_btn">\n                                <button type="button" title="ADD TO CART" class="toCart addtocartbtn" data-sku="${product.product_code}">\n                                    <span class="txt_btn">Add to Cart</span>\n                                    <span class="add_plus"></span>\n                                </button>\n                            </div>\n                        </div>`,html+="</div></div>"}}$(".personalised_swiper .swiper-wrapper").html(html),$(".personalised_top_products").show();var swiper=new Swiper(".personalised_swiper",{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".personalise-next",prevEl:".personalise-prev"}});applyPlusMinusButton()}}window.onload=function(){update_gtm_data_details()},$(document).on("click tap","section .pro_items a",(function(){var parentTitle=$(this).closest("section").attr("data-tracker");null!=parentTitle&&""!=parentTitle&&localStorage.setItem("nms_product_tracker",parentTitle)})),$(window).on("scroll",(function(){if($("#dynamic_page_load_more").length>0&&$(window).scrollTop()+$(window).height()>$(document).height()-100){var total_page=$("#dynamic_page_load_more").attr("data-pages");if(page<=total_page&&1==fetchMore){fetchMore=!1,$("#dynamic_page_load_more").append('<div class="jiomart_load"><div class="jiomart_loading">\n                                                        <div class="jiomart_loading_div">\n                                                            <div class="jiomart_loader"> &nbsp;</div>\n                                                        </div>\n                                                    </div></div>');var page_slug=window.location.pathname;"/"==page_slug&&(page_slug="/home");var pincode=window.default_pin;localStorage.getItem("nms_mgo_pincode")&&(pincode=localStorage.getItem("nms_mgo_pincode")),$.ajax({url:page_slug+"/"+page,method:"GET",data:{},headers:{pin:pincode},dataType:"HTML",success:function(resp){if(""!=resp){$(".jiomart_load").remove(),$("#dynamic_page_load_more").append(resp),page++,fetchMore=!0,applySwiper();var all_secs=[],sec_ids;if($(resp).filter(".top_deals_product_section").each((function(i,el){var sec_id=$(el).attr("data-id");all_secs.push(sec_id)})),all_secs.length>0)get_top_deals_product_section(all_secs.join());$(resp).filter(".personalised_top_products").each((function(i,el){get_personalised_products()})),setTimeout((function(){update_gtm_data_details()}),500)}},error:function(){}})}}})),$(document).ready((function(){$("body").hasClass("cms-home")&&localStorage.getItem("save_alter")&&localStorage.removeItem("save_alter"),applySwiper();var all_secs=[],sec_ids;($(".top_deals_product_section").each((function(i,el){var sec_id=$(el).attr("data-id");all_secs.push(sec_id)})),all_secs.length>0)&&get_top_deals_product_section(all_secs.join());$(".personalised_top_products").each((function(i,el){get_personalised_products()}))})),$(document).on("click tap",".jiomart_home section a",(function(e){if($(this).closest("section").attr("data-tracker"))var nms_product_tracker=$(this).closest("section").attr("data-tracker");if(null!=nms_product_tracker&&null!=nms_product_tracker&&""!=nms_product_tracker){var custEmail=null!=localStorage.getItem("displayemail")?localStorage.getItem("displayemail"):"",custNew=null!=localStorage.getItem("new_customer")?localStorage.getItem("new_customer"):"",cityName=null!=localStorage.getItem("nms_mgo_city")?localStorage.getItem("nms_mgo_city").toUpperCase():"NA",pincode=null!=localStorage.getItem("nms_mgo_pincode")?localStorage.getItem("nms_mgo_pincode").toUpperCase():"NA",prod_url=$(this).attr("href"),cateTitle="Category List",mainCategory="",gtmStatus;if("1"==document.getElementById("gtm_status").value){cateTitle=nms_product_tracker;var data_vertical=null!=$(this).closest(".pro_items").find(".data-vertical").val()?$(this).closest(".pro_items").find(".data-vertical").val():"";null!=data_vertical&&(mainCategory=data_vertical),null!=$(this).closest(".pro_items").find(".data-cate").val()&&(mainCategory+="/"+$(this).closest(".pro_items").find(".data-cate").val()),null!=$(this).closest(".pro_items").find(".data-subcate").val()&&(mainCategory+="/"+$(this).closest(".pro_items").find(".data-subcate").val()),""!=user_id&&""!=custEmail?(dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_productClick",ecommerce:{click:{actionField:{list:cateTitle},products:[{name:$(this).attr("title"),id:$(this).attr("data-objid"),price:$(this).closest(".pro_items").find(".final_price").text().replace("₹","").trim(" "),brand:null!=$(this).closest(".pro_items").find(".data-manu").val()?$(this).closest(".pro_items").find(".data-manu").val():"",category:mainCategory,position:$($(this).closest("section").find(".pro_items")).index($(this).closest(".pro_items"))+1}]}},customer:{isLoggedIn:!0,id:user_id,email:$.md5(custEmail),new_customer:custNew,city:cityName},eventCallback:function(){document.location=prod_url}})):(dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_productClick",ecommerce:{click:{actionField:{list:cateTitle},products:[{name:$(this).attr("title"),id:$(this).attr("data-objid"),price:$(this).closest(".pro_items").find(".final_price").text().replace("₹","").trim(" "),brand:null!=$(this).closest(".pro_items").find(".data-manu").val()?$(this).closest(".pro_items").find(".data-manu").val():"",category:mainCategory,position:$($(this).closest("section").find(".pro_items")).index($(this).closest(".pro_items"))+1}]}},customer:{isLoggedIn:!1,city:cityName},eventCallback:function(){document.location=prod_url}}))}}}));